<html lang="fr">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- Bootstrap core CSS -->
    <link href="assets/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <!-- Custom styles for this template -->
    <link href="assets/css/headerAndFooter.css" rel="stylesheet"/>
  	<link href="assets/css/sidebars.css" rel="stylesheet"/>
  	<link href="assets/css/content.css" rel="stylesheet"/>
  	<link href="assets/css/drag_and_drop_handler.css" rel="stylesheet"/>
  	<link href="assets/css/table.css" rel="stylesheet"/>
  	<link href="assets/css/colorSGRL.css" rel="stylesheet"/>
    <link href="https://getbootstrap.com/docs/5.0/examples/headers/" rel="canonical"/>
    <title>maquette Scorm</title>
  </head>

  <body>
    <header class="p-3 bg-green text-white header">
      <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center ">
      	  <!-- Logo du SGRL
      		<div>
      			<a href="https://www.univ-jfc.fr/grp/serious-game-research-lab-sgrl" target="_blank">
      				<img src="assets/images/sgrl-121x88.png" style="height: 60px;"/>
      			</a>
      		</div>
      		-->
      		<h1> Détails des données collectées </h1>
      	  <!-- Bouton "Profil" du header
          <div>
            <button type="button" class="btn btn-outline-light profil me-2">Profil</button>
          </div>
      	  -->
        </div>
      </div>
    </header>

<div id="competence">  </div>
<button onclick="window.open('index.html','_parent');"> retour </button>

<div class="contents" id="contents">
	<div class="compagnonContainer" >
		<img class="compagnon reverseImg" src="assets/images/sgrl_compagnon.png" />
		<div id="wrong_output">
			<p>idshiflqrhuifhrsrhgsrhrilfqhffqsrqhfqhfq slfjpqzof oh ^zehfpuqozhef pufhepquh pquhfpq phf pquh fpuf jqeufhiqlhf efugiqf qlf</p>
		</div>
	</div>

	<div class="compagnonContainer" >
		<img class="compagnon reverseImg" src="assets/images/sgrl_compagnon.png" />
		<div id="missing_gate_entries">
			<p>idshiflqrhuifhrsrhgsrhrilfqhffqsrqhfqhfq slfjpqzof oh ^zehfpuqozhef pufhepquh pquhfpq phf pquh fpuf jqeufhiqlhf efugiqf qlf</p>
		</div>
	</div>
	
	<div class="compagnonContainer" >
		<img class="compagnon reverseImg" src="assets/images/sgrl_compagnon.png" />
		<div id="missing_gate_output">
			<p>idshiflqrhuifhrsrhgsrhrilfqhffqsrqhfqhfq slfjpqzof oh ^zehfpuqozhef pufhepquh pquhfpq phf pquh fpuf jqeufhiqlhf efugiqf qlf</p>
		</div>
	</div>
	
	<div class="compagnonContainer" >
		<img class="compagnon reverseImg" src="assets/images/sgrl_compagnon.png" />
		<div id="load_file">
			<p>idshiflqrhuifhrsrhgsrhrilfqhffqsrqhfqhfq slfjpqzof oh ^zehfpuqozhef pufhepquh pquhfpq phf pquh fpuf jqeufhiqlhf efugiqf qlf</p>
		</div>
	</div>
	
	<div class="compagnonContainer" >
		<img class="compagnon reverseImg" src="assets/images/sgrl_compagnon.png" />
		<div id="gates_used">
			<p>idshiflqrhuifhrsrhgsrhrilfqhffqsrqhfqhfq slfjpqzof oh ^zehfpuqozhef pufhepquh pquhfpq phf pquh fpuf jqeufhiqlhf efugiqf qlf</p>
		</div>
	</div>
	
	<div class="compagnonContainer" >
		<img class="compagnon reverseImg" src="assets/images/sgrl_compagnon.png" />
		<div id="gates_required">
			<p>idshiflqrhuifhrsrhgsrhrilfqhffqsrqhfqhfq slfjpqzof oh ^zehfpuqozhef pufhepquh pquhfpq phf pquh fpuf jqeufhiqlhf efugiqf qlf</p>
		</div>
	</div>
</div>

  </body>

  <script type="application/javascript" src="script/js/fileHandler.js"></script>
  <script type="text/javascript" src="assets/JSON/data.json"></script>
  <script type="text/javascript" src="assets/JSON/connecteur_logique.json"></script>
  <script type="text/javascript" src="assets/JSON/erreur.json"></script>
  <script type="application/javascript" src="script/js/testXML.js"></script>
  <script type="application/javascript" src="script/js/textToEval.js"></script>
  
  
  
  <script>

for( var i = 0; i < sessionStorage.length; i++){
	//document.getElementById("competence").innerHTML += "<p> " + sessionStorage.key(i) + " : " + sessionStorage.getItem(sessionStorage.key(i)) + " </p>"
}
//console.log(sessionStorage.key());

//document.getElementById("tips").style.visibility = "visible";
		
		detailsErreur("missing_gate_entries","Aucune porte logique n'a d'entrée vide");
		detailsErreur("missing_gate_output","Aucune porte logique n'a de sortie vide");
		detailsErreur("wrong_output","Toutes les sorties ont les bons comportements");
		
		
		document.getElementById("load_file").innerHTML = "<p> Vous avez chargé un total de: " + sessionStorage.load_file + " fichier(s) </p>";
		document.getElementById("gates_used").innerHTML = "<p> Vous avez utilisé " + sessionStorage.total_gates_used + " portes logiques et le fichiers de correction en utilise " + sessionStorage.referend_gates_used;
		
		
		document.getElementById("gates_required").innerHTML = "";
		Object.keys(JSON.parse(sessionStorage.number_of_gates_required)).forEach(key => {
			document.getElementById("gates_required").innerHTML += "<p> Vous avez utilisé " + JSON.parse(sessionStorage.number_of_gates_required_used)[key] + " porte logique(s) " +
			key + " sur les " + JSON.parse(sessionStorage.number_of_gates_required)[key] + " demandée(s)";
		});

</script>

  <script type="text/javascript" language="JavaScript">
  	var nFindAPITries = 0;
  	var API = null;

  	function FindAPI(win) {
  		while ((win.API == null) && (win.parent != null) && (win.parent != win)) {
  			nFindAPITries++;
  			if (nFindAPITries > 500) {
  				console.log("Error in finding API -- too deeply nested.");
  				return null
  			}
  			win = win.parent
  		}
  		return win.API
  	}

  	function init() {
  		if ((window.parent) && (window.parent != window)) {
  			API = FindAPI(window.parent)
  		}
  		if ((API == null) && (window.opener != null)) {
  			API = FindAPI(window.opener)
  		}
  		if (API == null) {
  			console.log("No API adapter found")
  		} else {
  			API.LMSInitialize("")
  		}
  	}

  	function finish() {
  		if (API != null) {
  			API.LMSFinish("")
  		}
  	}

  	//init SCORM API
  	init();
  	let username = 'Anonymous';
  	let userid = 'user id';
  	let totalTime = 0;
    let note = 0;

  	if (API) {
  		username = API.LMSGetValue('cmi.core.student_name'); //nom de l'utilisateur
  		userid = API.LMSGetValue('cmi.core.student_id'); //id de l'utilisateur
  		totalTime = API.LMSGetValue('cmi.core.total_time'); //temps total de la session
      note = API.LMSGetValue('cmi.core.score.raw'); //score de l'utilisateur
  	}


	/*
  	document.getElementById("user").innerText = username;
  	document.getElementById("time").innerText = totalTime;
    document.getElementById("note").innerText = note;
    document.getElementById("userid").innerText = userid;
	*/

  	if (API) {
  		API.LMSSetValue("cmi.core.lesson_status", "passed"); // -> celui qu'on utilisera pour modifier les valeurs
  		API.LMSSetValue("cmi.core.score.raw", Math.floor(Math.random() * 100)); //octroie une note au hasard
  		API.LMSSetValue("cmi.core.score.min", 0);
  		//API.LMSSetValue("cmi.core.total_time", 180000);
		

  		finish();
  	}
  </script>
</html>
